<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 13.0.1 (20250615.1724)
 -->
<!-- Title: BLHeli_S_Interrupt_Flow Pages: 1 -->
<svg width="1603pt" height="959pt"
 viewBox="0.00 0.00 1603.00 959.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 954.5)">
<title>BLHeli_S_Interrupt_Flow</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-954.5 1599,-954.5 1599,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_timer0_int</title>
<polygon fill="lightgrey" stroke="lightgrey" points="8,-689 8,-942.5 182,-942.5 182,-689 8,-689"/>
<text xml:space="preserve" text-anchor="middle" x="95" y="-925.2" font-family="Times,serif" font-size="14.00">Timer0中断子流程</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_timer1_int</title>
<polygon fill="lightgrey" stroke="lightgrey" points="190,-8 190,-942.5 483,-942.5 483,-8 190,-8"/>
<text xml:space="preserve" text-anchor="middle" x="336.5" y="-925.2" font-family="Times,serif" font-size="14.00">Timer1中断子流程(DShot)</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_timer2_int</title>
<polygon fill="lightgrey" stroke="lightgrey" points="491,-334.5 491,-942.5 704,-942.5 704,-334.5 491,-334.5"/>
<text xml:space="preserve" text-anchor="middle" x="597.5" y="-925.2" font-family="Times,serif" font-size="14.00">Timer2中断子流程</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_timer3_int</title>
<polygon fill="lightgrey" stroke="lightgrey" points="712,-154 712,-942.5 1109,-942.5 1109,-154 712,-154"/>
<text xml:space="preserve" text-anchor="middle" x="910.5" y="-925.2" font-family="Times,serif" font-size="14.00">Timer3中断子流程(零交叉)</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_int0_int</title>
<polygon fill="lightgrey" stroke="lightgrey" points="1117,-421.5 1117,-942.5 1373,-942.5 1373,-421.5 1117,-421.5"/>
<text xml:space="preserve" text-anchor="middle" x="1245" y="-925.2" font-family="Times,serif" font-size="14.00">外部中断0子流程(RC脉冲)</text>
</g>
<g id="clust6" class="cluster">
<title>cluster_pca_int</title>
<polygon fill="lightgrey" stroke="lightgrey" points="1381,-689 1381,-942.5 1587,-942.5 1587,-689 1381,-689"/>
<text xml:space="preserve" text-anchor="middle" x="1484" y="-925.2" font-family="Times,serif" font-size="14.00">PCA中断子流程(PWM)</text>
</g>
<!-- t0_int -->
<g id="node1" class="node">
<title>t0_int</title>
<polygon fill="lightgreen" stroke="black" points="139.75,-906.25 50.25,-906.25 50.25,-849.5 139.75,-849.5 139.75,-906.25"/>
<text xml:space="preserve" text-anchor="middle" x="95" y="-890.85" font-family="Arial" font-size="12.00">Timer0中断</text>
<text xml:space="preserve" text-anchor="middle" x="95" y="-873.6" font-family="Arial" font-size="12.00">t0_int</text>
<text xml:space="preserve" text-anchor="middle" x="95" y="-859.35" font-family="Arial" font-size="12.00">(RC脉冲计时)</text>
</g>
<!-- t0_int_increment -->
<g id="node7" class="node">
<title>t0_int_increment</title>
<polygon fill="lightblue" stroke="black" points="173.88,-812.5 16.12,-812.5 16.12,-770 173.88,-770 173.88,-812.5"/>
<text xml:space="preserve" text-anchor="middle" x="95" y="-797.1" font-family="Arial" font-size="12.00">递增Timer0_X</text>
<text xml:space="preserve" text-anchor="middle" x="95" y="-779.85" font-family="Arial" font-size="12.00">(仅在MCU_48MHZ启用时)</text>
</g>
<!-- t0_int&#45;&gt;t0_int_increment -->
<g id="edge1" class="edge">
<title>t0_int&#45;&gt;t0_int_increment</title>
<path fill="none" stroke="black" d="M95,-849.17C95,-841.2 95,-832.44 95,-824.24"/>
<polygon fill="black" stroke="black" points="98.5,-824.29 95,-814.29 91.5,-824.29 98.5,-824.29"/>
</g>
<!-- t1_int -->
<g id="node2" class="node">
<title>t1_int</title>
<polygon fill="lightgreen" stroke="black" points="416.62,-906.25 311.38,-906.25 311.38,-849.5 416.62,-849.5 416.62,-906.25"/>
<text xml:space="preserve" text-anchor="middle" x="364" y="-890.85" font-family="Arial" font-size="12.00">Timer1中断</text>
<text xml:space="preserve" text-anchor="middle" x="364" y="-873.6" font-family="Arial" font-size="12.00">t1_int</text>
<text xml:space="preserve" text-anchor="middle" x="364" y="-859.35" font-family="Arial" font-size="12.00">(DShot信号解码)</text>
</g>
<!-- t1_int_disable -->
<g id="node9" class="node">
<title>t1_int_disable</title>
<polygon fill="lightblue" stroke="black" points="408,-809.25 320,-809.25 320,-773.25 408,-773.25 408,-809.25"/>
<text xml:space="preserve" text-anchor="middle" x="364" y="-788.48" font-family="Arial" font-size="12.00">禁用其他中断</text>
</g>
<!-- t1_int&#45;&gt;t1_int_disable -->
<g id="edge3" class="edge">
<title>t1_int&#45;&gt;t1_int_disable</title>
<path fill="none" stroke="black" d="M364,-849.17C364,-840.12 364,-830.05 364,-820.93"/>
<polygon fill="black" stroke="black" points="367.5,-821.17 364,-811.17 360.5,-821.17 367.5,-821.17"/>
</g>
<!-- t2_int -->
<g id="node3" class="node">
<title>t2_int</title>
<polygon fill="lightgreen" stroke="black" points="670.25,-906.25 577.75,-906.25 577.75,-849.5 670.25,-849.5 670.25,-906.25"/>
<text xml:space="preserve" text-anchor="middle" x="624" y="-890.85" font-family="Arial" font-size="12.00">Timer2中断</text>
<text xml:space="preserve" text-anchor="middle" x="624" y="-873.6" font-family="Arial" font-size="12.00">t2_int</text>
<text xml:space="preserve" text-anchor="middle" x="624" y="-859.35" font-family="Arial" font-size="12.00">(RC超时/换向)</text>
</g>
<!-- t2_int_save -->
<g id="node19" class="node">
<title>t2_int_save</title>
<polygon fill="lightblue" stroke="black" points="662,-809.25 586,-809.25 586,-773.25 662,-773.25 662,-809.25"/>
<text xml:space="preserve" text-anchor="middle" x="624" y="-788.48" font-family="Arial" font-size="12.00">保存寄存器</text>
</g>
<!-- t2_int&#45;&gt;t2_int_save -->
<g id="edge16" class="edge">
<title>t2_int&#45;&gt;t2_int_save</title>
<path fill="none" stroke="black" d="M624,-849.17C624,-840.12 624,-830.05 624,-820.93"/>
<polygon fill="black" stroke="black" points="627.5,-821.17 624,-811.17 620.5,-821.17 627.5,-821.17"/>
</g>
<!-- t3_int -->
<g id="node4" class="node">
<title>t3_int</title>
<polygon fill="lightgreen" stroke="black" points="1056.25,-906.25 921.75,-906.25 921.75,-849.5 1056.25,-849.5 1056.25,-906.25"/>
<text xml:space="preserve" text-anchor="middle" x="989" y="-890.85" font-family="Arial" font-size="12.00">Timer3中断</text>
<text xml:space="preserve" text-anchor="middle" x="989" y="-873.6" font-family="Arial" font-size="12.00">t3_int</text>
<text xml:space="preserve" text-anchor="middle" x="989" y="-859.35" font-family="Arial" font-size="12.00">(换向超时/零交叉检测)</text>
</g>
<!-- t3_int_save -->
<g id="node25" class="node">
<title>t3_int_save</title>
<polygon fill="lightblue" stroke="black" points="1027,-809.25 951,-809.25 951,-773.25 1027,-773.25 1027,-809.25"/>
<text xml:space="preserve" text-anchor="middle" x="989" y="-788.48" font-family="Arial" font-size="12.00">保存寄存器</text>
</g>
<!-- t3_int&#45;&gt;t3_int_save -->
<g id="edge23" class="edge">
<title>t3_int&#45;&gt;t3_int_save</title>
<path fill="none" stroke="black" d="M989,-849.17C989,-840.12 989,-830.05 989,-820.93"/>
<polygon fill="black" stroke="black" points="992.5,-821.17 989,-811.17 985.5,-821.17 992.5,-821.17"/>
</g>
<!-- int0_int -->
<g id="node5" class="node">
<title>int0_int</title>
<polygon fill="lightgreen" stroke="black" points="1316.75,-906.25 1227.25,-906.25 1227.25,-849.5 1316.75,-849.5 1316.75,-906.25"/>
<text xml:space="preserve" text-anchor="middle" x="1272" y="-890.85" font-family="Arial" font-size="12.00">外部中断0</text>
<text xml:space="preserve" text-anchor="middle" x="1272" y="-873.6" font-family="Arial" font-size="12.00">int0_int</text>
<text xml:space="preserve" text-anchor="middle" x="1272" y="-859.35" font-family="Arial" font-size="12.00">(RC脉冲捕获)</text>
</g>
<!-- int0_int_read_pulse -->
<g id="node34" class="node">
<title>int0_int_read_pulse</title>
<polygon fill="lightblue" stroke="black" points="1325,-809.25 1219,-809.25 1219,-773.25 1325,-773.25 1325,-809.25"/>
<text xml:space="preserve" text-anchor="middle" x="1272" y="-788.48" font-family="Arial" font-size="12.00">读取RC脉冲长度</text>
</g>
<!-- int0_int&#45;&gt;int0_int_read_pulse -->
<g id="edge35" class="edge">
<title>int0_int&#45;&gt;int0_int_read_pulse</title>
<path fill="none" stroke="black" d="M1272,-849.17C1272,-840.12 1272,-830.05 1272,-820.93"/>
<polygon fill="black" stroke="black" points="1275.5,-821.17 1272,-811.17 1268.5,-821.17 1275.5,-821.17"/>
</g>
<!-- pca_int -->
<g id="node6" class="node">
<title>pca_int</title>
<polygon fill="lightgreen" stroke="black" points="1522.38,-906.25 1445.62,-906.25 1445.62,-849.5 1522.38,-849.5 1522.38,-906.25"/>
<text xml:space="preserve" text-anchor="middle" x="1484" y="-890.85" font-family="Arial" font-size="12.00">PCA中断</text>
<text xml:space="preserve" text-anchor="middle" x="1484" y="-873.6" font-family="Arial" font-size="12.00">pca_int</text>
<text xml:space="preserve" text-anchor="middle" x="1484" y="-859.35" font-family="Arial" font-size="12.00">(PWM控制)</text>
</g>
<!-- pca_int_adjust -->
<g id="node39" class="node">
<title>pca_int_adjust</title>
<polygon fill="lightblue" stroke="black" points="1579.38,-809.25 1388.62,-809.25 1388.62,-773.25 1579.38,-773.25 1579.38,-809.25"/>
<text xml:space="preserve" text-anchor="middle" x="1484" y="-788.48" font-family="Arial" font-size="12.00">根据当前PWM值调整PCA寄存器</text>
</g>
<!-- pca_int&#45;&gt;pca_int_adjust -->
<g id="edge41" class="edge">
<title>pca_int&#45;&gt;pca_int_adjust</title>
<path fill="none" stroke="black" d="M1484,-849.17C1484,-840.12 1484,-830.05 1484,-820.93"/>
<polygon fill="black" stroke="black" points="1487.5,-821.17 1484,-811.17 1480.5,-821.17 1487.5,-821.17"/>
</g>
<!-- t0_int_exit -->
<g id="node8" class="node">
<title>t0_int_exit</title>
<polygon fill="lightblue" stroke="black" points="127,-733 63,-733 63,-697 127,-697 127,-733"/>
<text xml:space="preserve" text-anchor="middle" x="95" y="-712.23" font-family="Arial" font-size="12.00">退出中断</text>
</g>
<!-- t0_int_increment&#45;&gt;t0_int_exit -->
<g id="edge2" class="edge">
<title>t0_int_increment&#45;&gt;t0_int_exit</title>
<path fill="none" stroke="black" d="M95,-769.57C95,-761.75 95,-752.72 95,-744.32"/>
<polygon fill="black" stroke="black" points="98.5,-744.58 95,-734.58 91.5,-744.58 98.5,-744.58"/>
</g>
<!-- t1_int_stop -->
<g id="node10" class="node">
<title>t1_int_stop</title>
<polygon fill="lightblue" stroke="black" points="402.38,-733 325.62,-733 325.62,-697 402.38,-697 402.38,-733"/>
<text xml:space="preserve" text-anchor="middle" x="364" y="-712.23" font-family="Arial" font-size="12.00">停止Timer1</text>
</g>
<!-- t1_int_disable&#45;&gt;t1_int_stop -->
<g id="edge4" class="edge">
<title>t1_int_disable&#45;&gt;t1_int_stop</title>
<path fill="none" stroke="black" d="M364,-773.03C364,-764.66 364,-754.36 364,-744.84"/>
<polygon fill="black" stroke="black" points="367.5,-744.9 364,-734.9 360.5,-744.9 367.5,-744.9"/>
</g>
<!-- t1_int_save -->
<g id="node11" class="node">
<title>t1_int_save</title>
<polygon fill="lightblue" stroke="black" points="402,-646 326,-646 326,-610 402,-610 402,-646"/>
<text xml:space="preserve" text-anchor="middle" x="364" y="-625.23" font-family="Arial" font-size="12.00">保存寄存器</text>
</g>
<!-- t1_int_stop&#45;&gt;t1_int_save -->
<g id="edge5" class="edge">
<title>t1_int_stop&#45;&gt;t1_int_save</title>
<path fill="none" stroke="black" d="M364,-696.8C364,-685.58 364,-670.67 364,-657.69"/>
<polygon fill="black" stroke="black" points="367.5,-657.98 364,-647.98 360.5,-657.98 367.5,-657.98"/>
</g>
<!-- t1_int_read_timer2 -->
<g id="node12" class="node">
<title>t1_int_read_timer2</title>
<polygon fill="lightblue" stroke="black" points="414,-559 314,-559 314,-516.5 414,-516.5 414,-559"/>
<text xml:space="preserve" text-anchor="middle" x="364" y="-543.6" font-family="Arial" font-size="12.00">读取Timer2值</text>
<text xml:space="preserve" text-anchor="middle" x="364" y="-526.35" font-family="Arial" font-size="12.00">计算帧时间长度</text>
</g>
<!-- t1_int_save&#45;&gt;t1_int_read_timer2 -->
<g id="edge6" class="edge">
<title>t1_int_save&#45;&gt;t1_int_read_timer2</title>
<path fill="none" stroke="black" d="M364,-609.56C364,-598.49 364,-583.82 364,-570.7"/>
<polygon fill="black" stroke="black" points="367.5,-570.76 364,-560.76 360.5,-570.76 367.5,-570.76"/>
</g>
<!-- t1_int_check_frame -->
<g id="node13" class="node">
<title>t1_int_check_frame</title>
<polygon fill="lightblue" stroke="black" points="450,-465.5 278,-465.5 278,-429.5 450,-429.5 450,-465.5"/>
<text xml:space="preserve" text-anchor="middle" x="364" y="-444.73" font-family="Arial" font-size="12.00">检查帧时间是否在允许范围内</text>
</g>
<!-- t1_int_read_timer2&#45;&gt;t1_int_check_frame -->
<g id="edge7" class="edge">
<title>t1_int_read_timer2&#45;&gt;t1_int_check_frame</title>
<path fill="none" stroke="black" d="M364,-516.28C364,-504.71 364,-490.05 364,-477.32"/>
<polygon fill="black" stroke="black" points="367.5,-477.4 364,-467.4 360.5,-477.4 367.5,-477.4"/>
</g>
<!-- t1_int_verify_pulses -->
<g id="node14" class="node">
<title>t1_int_verify_pulses</title>
<polygon fill="lightblue" stroke="black" points="407,-378.5 271,-378.5 271,-342.5 407,-342.5 407,-378.5"/>
<text xml:space="preserve" text-anchor="middle" x="339" y="-357.73" font-family="Arial" font-size="12.00">验证接收到的脉冲数量</text>
</g>
<!-- t1_int_check_frame&#45;&gt;t1_int_verify_pulses -->
<g id="edge8" class="edge">
<title>t1_int_check_frame&#45;&gt;t1_int_verify_pulses</title>
<path fill="none" stroke="black" d="M358.94,-429.3C355.61,-417.97 351.17,-402.86 347.32,-389.79"/>
<polygon fill="black" stroke="black" points="350.74,-389.03 344.56,-380.42 344.03,-391 350.74,-389.03"/>
<text xml:space="preserve" text-anchor="middle" x="377.37" y="-402" font-family="Arial" font-size="10.00">帧时间正常</text>
</g>
<!-- t1_int_restore -->
<g id="node17" class="node">
<title>t1_int_restore</title>
<polygon fill="lightblue" stroke="black" points="399,-125 323,-125 323,-89 399,-89 399,-125"/>
<text xml:space="preserve" text-anchor="middle" x="361" y="-104.22" font-family="Arial" font-size="12.00">恢复寄存器</text>
</g>
<!-- t1_int_check_frame&#45;&gt;t1_int_restore -->
<g id="edge9" class="edge">
<title>t1_int_check_frame&#45;&gt;t1_int_restore</title>
<path fill="none" stroke="black" d="M389.44,-429.33C395.56,-424.2 401.6,-418.15 406,-411.5 455.14,-337.34 478.82,-299.82 449,-216 437.31,-183.16 410.89,-153.06 390.03,-133.03"/>
<polygon fill="black" stroke="black" points="392.59,-130.63 382.88,-126.37 387.81,-135.75 392.59,-130.63"/>
<text xml:space="preserve" text-anchor="middle" x="486.53" y="-268.25" font-family="Arial" font-size="10.00">帧时间异常</text>
</g>
<!-- t1_int_decode_dshot -->
<g id="node15" class="node">
<title>t1_int_decode_dshot</title>
<polygon fill="lightblue" stroke="black" points="369.62,-291.5 198.38,-291.5 198.38,-249 369.62,-249 369.62,-291.5"/>
<text xml:space="preserve" text-anchor="middle" x="284" y="-276.1" font-family="Arial" font-size="12.00">解码DShot数据</text>
<text xml:space="preserve" text-anchor="middle" x="284" y="-258.85" font-family="Arial" font-size="12.00">(MSB和LSB解码及XOR校验)</text>
</g>
<!-- t1_int_verify_pulses&#45;&gt;t1_int_decode_dshot -->
<g id="edge10" class="edge">
<title>t1_int_verify_pulses&#45;&gt;t1_int_decode_dshot</title>
<path fill="none" stroke="black" d="M328.13,-342.06C320.88,-330.42 311.15,-314.81 302.67,-301.21"/>
<polygon fill="black" stroke="black" points="305.83,-299.67 297.57,-293.03 299.89,-303.37 305.83,-299.67"/>
<text xml:space="preserve" text-anchor="middle" x="345.68" y="-315" font-family="Arial" font-size="10.00">脉冲数量正确</text>
</g>
<!-- t1_int_verify_pulses&#45;&gt;t1_int_restore -->
<g id="edge11" class="edge">
<title>t1_int_verify_pulses&#45;&gt;t1_int_restore</title>
<path fill="none" stroke="black" d="M365.17,-342.04C370.68,-337.06 375.79,-331.15 379,-324.5 387.24,-307.43 389.51,-172.41 385,-154 383.44,-147.66 380.85,-141.22 377.92,-135.24"/>
<polygon fill="black" stroke="black" points="381,-133.59 373.17,-126.45 374.84,-136.91 381,-133.59"/>
<text xml:space="preserve" text-anchor="middle" x="416.46" y="-221.5" font-family="Arial" font-size="10.00">脉冲数量错误</text>
</g>
<!-- t1_int_process_cmd -->
<g id="node16" class="node">
<title>t1_int_process_cmd</title>
<polygon fill="lightblue" stroke="black" points="295.88,-198 198.12,-198 198.12,-162 295.88,-162 295.88,-198"/>
<text xml:space="preserve" text-anchor="middle" x="247" y="-177.22" font-family="Arial" font-size="12.00">处理DShot命令</text>
</g>
<!-- t1_int_decode_dshot&#45;&gt;t1_int_process_cmd -->
<g id="edge12" class="edge">
<title>t1_int_decode_dshot&#45;&gt;t1_int_process_cmd</title>
<path fill="none" stroke="black" d="M275.42,-248.78C270.42,-236.85 264.04,-221.64 258.59,-208.65"/>
<polygon fill="black" stroke="black" points="261.97,-207.65 254.87,-199.78 255.51,-210.35 261.97,-207.65"/>
<text xml:space="preserve" text-anchor="middle" x="287.22" y="-221.5" font-family="Arial" font-size="10.00">校验正确</text>
</g>
<!-- t1_int_decode_dshot&#45;&gt;t1_int_restore -->
<g id="edge13" class="edge">
<title>t1_int_decode_dshot&#45;&gt;t1_int_restore</title>
<path fill="none" stroke="black" d="M299.75,-248.77C303.69,-243.17 307.72,-236.99 311,-231 328.07,-199.78 342.73,-161.49 351.69,-136.01"/>
<polygon fill="black" stroke="black" points="354.94,-137.3 354.89,-126.7 348.33,-135.02 354.94,-137.3"/>
<text xml:space="preserve" text-anchor="middle" x="364.28" y="-178" font-family="Arial" font-size="10.00">校验错误</text>
</g>
<!-- t1_int_process_cmd&#45;&gt;t1_int_restore -->
<g id="edge14" class="edge">
<title>t1_int_process_cmd&#45;&gt;t1_int_restore</title>
<path fill="none" stroke="black" d="M274.89,-161.63C289.52,-152.52 307.64,-141.23 323.49,-131.36"/>
<polygon fill="black" stroke="black" points="325.08,-134.49 331.72,-126.24 321.38,-128.55 325.08,-134.49"/>
</g>
<!-- t1_int_exit -->
<g id="node18" class="node">
<title>t1_int_exit</title>
<polygon fill="lightblue" stroke="black" points="393,-52 329,-52 329,-16 393,-16 393,-52"/>
<text xml:space="preserve" text-anchor="middle" x="361" y="-31.23" font-family="Arial" font-size="12.00">退出中断</text>
</g>
<!-- t1_int_restore&#45;&gt;t1_int_exit -->
<g id="edge15" class="edge">
<title>t1_int_restore&#45;&gt;t1_int_exit</title>
<path fill="none" stroke="black" d="M361,-88.81C361,-81.23 361,-72.1 361,-63.54"/>
<polygon fill="black" stroke="black" points="364.5,-63.54 361,-53.54 357.5,-63.54 364.5,-63.54"/>
</g>
<!-- t2_int_check_timeout -->
<g id="node20" class="node">
<title>t2_int_check_timeout</title>
<polygon fill="lightblue" stroke="black" points="665,-733 583,-733 583,-697 665,-697 665,-733"/>
<text xml:space="preserve" text-anchor="middle" x="624" y="-712.23" font-family="Arial" font-size="12.00">检查RC超时</text>
</g>
<!-- t2_int_save&#45;&gt;t2_int_check_timeout -->
<g id="edge17" class="edge">
<title>t2_int_save&#45;&gt;t2_int_check_timeout</title>
<path fill="none" stroke="black" d="M624,-773.03C624,-764.66 624,-754.36 624,-744.84"/>
<polygon fill="black" stroke="black" points="627.5,-744.9 624,-734.9 620.5,-744.9 627.5,-744.9"/>
</g>
<!-- t2_int_check_wait_comm -->
<g id="node21" class="node">
<title>t2_int_check_wait_comm</title>
<polygon fill="lightblue" stroke="black" points="668,-646 580,-646 580,-610 668,-610 668,-646"/>
<text xml:space="preserve" text-anchor="middle" x="624" y="-625.23" font-family="Arial" font-size="12.00">检查等待换向</text>
</g>
<!-- t2_int_check_timeout&#45;&gt;t2_int_check_wait_comm -->
<g id="edge18" class="edge">
<title>t2_int_check_timeout&#45;&gt;t2_int_check_wait_comm</title>
<path fill="none" stroke="black" d="M624,-696.8C624,-685.58 624,-670.67 624,-657.69"/>
<polygon fill="black" stroke="black" points="627.5,-657.98 624,-647.98 620.5,-657.98 627.5,-657.98"/>
</g>
<!-- t2_int_check_wait_comm_done -->
<g id="node22" class="node">
<title>t2_int_check_wait_comm_done</title>
<polygon fill="lightblue" stroke="black" points="611,-555.75 499,-555.75 499,-519.75 611,-519.75 611,-555.75"/>
<text xml:space="preserve" text-anchor="middle" x="555" y="-534.98" font-family="Arial" font-size="12.00">检查等待换向完成</text>
</g>
<!-- t2_int_check_wait_comm&#45;&gt;t2_int_check_wait_comm_done -->
<g id="edge19" class="edge">
<title>t2_int_check_wait_comm&#45;&gt;t2_int_check_wait_comm_done</title>
<path fill="none" stroke="black" d="M610.37,-609.56C600.44,-596.87 586.83,-579.46 575.59,-565.08"/>
<polygon fill="black" stroke="black" points="578.45,-563.06 569.54,-557.34 572.94,-567.38 578.45,-563.06"/>
<text xml:space="preserve" text-anchor="middle" x="615.18" y="-582.5" font-family="Arial" font-size="10.00">等待换向</text>
</g>
<!-- t2_int_restore -->
<g id="node23" class="node">
<title>t2_int_restore</title>
<polygon fill="lightblue" stroke="black" points="662,-465.5 586,-465.5 586,-429.5 662,-429.5 662,-465.5"/>
<text xml:space="preserve" text-anchor="middle" x="624" y="-444.73" font-family="Arial" font-size="12.00">恢复寄存器</text>
</g>
<!-- t2_int_check_wait_comm&#45;&gt;t2_int_restore -->
<g id="edge20" class="edge">
<title>t2_int_check_wait_comm&#45;&gt;t2_int_restore</title>
<path fill="none" stroke="black" d="M633.08,-609.65C635.5,-604.15 637.78,-597.96 639,-592 647.1,-552.53 639.1,-506.01 632.03,-476.88"/>
<polygon fill="black" stroke="black" points="635.47,-476.18 629.59,-467.36 628.69,-477.92 635.47,-476.18"/>
<text xml:space="preserve" text-anchor="middle" x="666.78" y="-535.75" font-family="Arial" font-size="10.00">不等待换向</text>
</g>
<!-- t2_int_check_wait_comm_done&#45;&gt;t2_int_restore -->
<g id="edge21" class="edge">
<title>t2_int_check_wait_comm_done&#45;&gt;t2_int_restore</title>
<path fill="none" stroke="black" d="M568.63,-519.31C578.56,-506.62 592.17,-489.21 603.41,-474.83"/>
<polygon fill="black" stroke="black" points="606.06,-477.13 609.46,-467.09 600.55,-472.81 606.06,-477.13"/>
</g>
<!-- t2_int_exit -->
<g id="node24" class="node">
<title>t2_int_exit</title>
<polygon fill="lightblue" stroke="black" points="656,-378.5 592,-378.5 592,-342.5 656,-342.5 656,-378.5"/>
<text xml:space="preserve" text-anchor="middle" x="624" y="-357.73" font-family="Arial" font-size="12.00">退出中断</text>
</g>
<!-- t2_int_restore&#45;&gt;t2_int_exit -->
<g id="edge22" class="edge">
<title>t2_int_restore&#45;&gt;t2_int_exit</title>
<path fill="none" stroke="black" d="M624,-429.3C624,-418.08 624,-403.17 624,-390.19"/>
<polygon fill="black" stroke="black" points="627.5,-390.48 624,-380.48 620.5,-390.48 627.5,-390.48"/>
</g>
<!-- t3_int_clear_flag -->
<g id="node26" class="node">
<title>t3_int_clear_flag</title>
<polygon fill="lightblue" stroke="black" points="1059.25,-733 918.75,-733 918.75,-697 1059.25,-697 1059.25,-733"/>
<text xml:space="preserve" text-anchor="middle" x="989" y="-712.23" font-family="Arial" font-size="12.00">清除T3_PENDING标志</text>
</g>
<!-- t3_int_save&#45;&gt;t3_int_clear_flag -->
<g id="edge24" class="edge">
<title>t3_int_save&#45;&gt;t3_int_clear_flag</title>
<path fill="none" stroke="black" d="M989,-773.03C989,-764.66 989,-754.36 989,-744.84"/>
<polygon fill="black" stroke="black" points="992.5,-744.9 989,-734.9 985.5,-744.9 992.5,-744.9"/>
</g>
<!-- t3_int_check_phase -->
<g id="node27" class="node">
<title>t3_int_check_phase</title>
<polygon fill="lightblue" stroke="black" points="1033,-646 945,-646 945,-610 1033,-610 1033,-646"/>
<text xml:space="preserve" text-anchor="middle" x="989" y="-625.23" font-family="Arial" font-size="12.00">检查运行阶段</text>
</g>
<!-- t3_int_clear_flag&#45;&gt;t3_int_check_phase -->
<g id="edge25" class="edge">
<title>t3_int_clear_flag&#45;&gt;t3_int_check_phase</title>
<path fill="none" stroke="black" d="M989,-696.8C989,-685.58 989,-670.67 989,-657.69"/>
<polygon fill="black" stroke="black" points="992.5,-657.98 989,-647.98 985.5,-657.98 992.5,-657.98"/>
</g>
<!-- t3_int_check_zc_scan -->
<g id="node28" class="node">
<title>t3_int_check_zc_scan</title>
<polygon fill="lightblue" stroke="black" points="998,-555.75 898,-555.75 898,-519.75 998,-519.75 998,-555.75"/>
<text xml:space="preserve" text-anchor="middle" x="948" y="-534.98" font-family="Arial" font-size="12.00">检查零交叉扫描</text>
</g>
<!-- t3_int_check_phase&#45;&gt;t3_int_check_zc_scan -->
<g id="edge26" class="edge">
<title>t3_int_check_phase&#45;&gt;t3_int_check_zc_scan</title>
<path fill="none" stroke="black" d="M962.88,-609.57C957.4,-604.59 952.36,-598.67 949.25,-592 945.69,-584.37 944.51,-575.42 944.46,-567.07"/>
<polygon fill="black" stroke="black" points="947.94,-567.52 944.94,-557.36 940.95,-567.18 947.94,-567.52"/>
<text xml:space="preserve" text-anchor="middle" x="993.12" y="-582.5" font-family="Arial" font-size="10.00">启动或初始运行阶段</text>
</g>
<!-- t3_int_restore -->
<g id="node32" class="node">
<title>t3_int_restore</title>
<polygon fill="lightblue" stroke="black" points="1075,-288.25 999,-288.25 999,-252.25 1075,-252.25 1075,-288.25"/>
<text xml:space="preserve" text-anchor="middle" x="1037" y="-267.48" font-family="Arial" font-size="12.00">恢复寄存器</text>
</g>
<!-- t3_int_check_phase&#45;&gt;t3_int_restore -->
<g id="edge27" class="edge">
<title>t3_int_check_phase&#45;&gt;t3_int_restore</title>
<path fill="none" stroke="black" d="M1021.03,-609.5C1027.28,-604.64 1033.1,-598.8 1037,-592 1074.95,-525.95 1006.17,-480.38 1054.5,-421.5 1064.09,-409.82 1078.02,-423.66 1087,-411.5 1114.22,-374.64 1094.25,-349.56 1072,-309.5 1069.64,-305.25 1066.72,-301.09 1063.58,-297.18"/>
<polygon fill="black" stroke="black" points="1066.23,-294.89 1057.01,-289.68 1060.97,-299.51 1066.23,-294.89"/>
<text xml:space="preserve" text-anchor="middle" x="1083.75" y="-445.5" font-family="Arial" font-size="10.00">正常运行阶段</text>
</g>
<!-- t3_int_check_comm_phase -->
<g id="node29" class="node">
<title>t3_int_check_comm_phase</title>
<polygon fill="lightblue" stroke="black" points="986,-465.5 838,-465.5 838,-429.5 986,-429.5 986,-465.5"/>
<text xml:space="preserve" text-anchor="middle" x="912" y="-444.73" font-family="Arial" font-size="12.00">根据换向相位检查比较器</text>
</g>
<!-- t3_int_check_zc_scan&#45;&gt;t3_int_check_comm_phase -->
<g id="edge28" class="edge">
<title>t3_int_check_zc_scan&#45;&gt;t3_int_check_comm_phase</title>
<path fill="none" stroke="black" d="M940.89,-519.31C935.91,-507.11 929.15,-490.53 923.42,-476.49"/>
<polygon fill="black" stroke="black" points="926.69,-475.24 919.67,-467.3 920.21,-477.88 926.69,-475.24"/>
<text xml:space="preserve" text-anchor="middle" x="956.53" y="-489" font-family="Arial" font-size="10.00">零交叉扫描</text>
</g>
<!-- t3_int_check_zc_scan&#45;&gt;t3_int_restore -->
<g id="edge29" class="edge">
<title>t3_int_check_zc_scan&#45;&gt;t3_int_restore</title>
<path fill="none" stroke="black" d="M967.55,-519.26C973.67,-513.12 980.1,-505.89 985,-498.5 1012.25,-457.44 993.76,-431.46 1028.5,-396.5 1042.67,-382.24 1058.97,-395.31 1070,-378.5 1086.2,-353.81 1071.65,-320.76 1057.08,-297.91"/>
<polygon fill="black" stroke="black" points="1060.06,-296.07 1051.56,-289.74 1054.26,-299.99 1060.06,-296.07"/>
<text xml:space="preserve" text-anchor="middle" x="1057.75" y="-402" font-family="Arial" font-size="10.00">非零交叉扫描</text>
</g>
<!-- t3_int_wait_for_comm -->
<g id="node30" class="node">
<title>t3_int_wait_for_comm</title>
<polygon fill="lightblue" stroke="black" points="841.5,-378.5 720.5,-378.5 720.5,-342.5 841.5,-342.5 841.5,-378.5"/>
<text xml:space="preserve" text-anchor="middle" x="781" y="-357.73" font-family="Arial" font-size="12.00">调用wait_for_comm</text>
</g>
<!-- t3_int_check_comm_phase&#45;&gt;t3_int_wait_for_comm -->
<g id="edge30" class="edge">
<title>t3_int_check_comm_phase&#45;&gt;t3_int_wait_for_comm</title>
<path fill="none" stroke="black" d="M885.17,-429.09C865.57,-416.37 838.77,-398.98 817.26,-385.02"/>
<polygon fill="black" stroke="black" points="819.35,-382.21 809.06,-379.71 815.54,-388.09 819.35,-382.21"/>
<text xml:space="preserve" text-anchor="middle" x="878.72" y="-402" font-family="Arial" font-size="10.00">比较器匹配</text>
</g>
<!-- t3_int_evaluate_comp -->
<g id="node31" class="node">
<title>t3_int_evaluate_comp</title>
<polygon fill="lightblue" stroke="black" points="1060.62,-378.5 859.38,-378.5 859.38,-342.5 1060.62,-342.5 1060.62,-378.5"/>
<text xml:space="preserve" text-anchor="middle" x="960" y="-357.73" font-family="Arial" font-size="12.00">调用evaluate_comparator_integrity</text>
</g>
<!-- t3_int_check_comm_phase&#45;&gt;t3_int_evaluate_comp -->
<g id="edge31" class="edge">
<title>t3_int_check_comm_phase&#45;&gt;t3_int_evaluate_comp</title>
<path fill="none" stroke="black" d="M921.3,-429.31C926.58,-419.64 933.34,-407.36 939.5,-396.5 940.93,-393.98 942.43,-391.37 943.94,-388.76"/>
<polygon fill="black" stroke="black" points="946.91,-390.6 948.93,-380.2 940.87,-387.08 946.91,-390.6"/>
<text xml:space="preserve" text-anchor="middle" x="968.75" y="-402" font-family="Arial" font-size="10.00">比较器不匹配</text>
</g>
<!-- t3_int_wait_for_comm&#45;&gt;t3_int_restore -->
<g id="edge32" class="edge">
<title>t3_int_wait_for_comm&#45;&gt;t3_int_restore</title>
<path fill="none" stroke="black" d="M828.84,-342.02C835.92,-339.47 843.15,-336.9 850,-334.5 896.66,-318.16 950.12,-300.15 987.89,-287.54"/>
<polygon fill="black" stroke="black" points="988.78,-290.93 997.16,-284.45 986.57,-284.29 988.78,-290.93"/>
</g>
<!-- t3_int_evaluate_comp&#45;&gt;t3_int_restore -->
<g id="edge33" class="edge">
<title>t3_int_evaluate_comp&#45;&gt;t3_int_restore</title>
<path fill="none" stroke="black" d="M975.21,-342.06C986.39,-329.25 1001.77,-311.63 1014.38,-297.17"/>
<polygon fill="black" stroke="black" points="1016.89,-299.63 1020.82,-289.79 1011.61,-295.02 1016.89,-299.63"/>
</g>
<!-- t3_int_exit -->
<g id="node33" class="node">
<title>t3_int_exit</title>
<polygon fill="lightblue" stroke="black" points="1069,-198 1005,-198 1005,-162 1069,-162 1069,-198"/>
<text xml:space="preserve" text-anchor="middle" x="1037" y="-177.22" font-family="Arial" font-size="12.00">退出中断</text>
</g>
<!-- t3_int_restore&#45;&gt;t3_int_exit -->
<g id="edge34" class="edge">
<title>t3_int_restore&#45;&gt;t3_int_exit</title>
<path fill="none" stroke="black" d="M1037,-251.81C1037,-239.85 1037,-223.69 1037,-209.83"/>
<polygon fill="black" stroke="black" points="1040.5,-209.91 1037,-199.91 1033.5,-209.91 1040.5,-209.91"/>
</g>
<!-- int0_int_check_range -->
<g id="node35" class="node">
<title>int0_int_check_range</title>
<polygon fill="lightblue" stroke="black" points="1352,-733 1192,-733 1192,-697 1352,-697 1352,-733"/>
<text xml:space="preserve" text-anchor="middle" x="1272" y="-712.23" font-family="Arial" font-size="12.00">检查脉冲是否在合法范围内</text>
</g>
<!-- int0_int_read_pulse&#45;&gt;int0_int_check_range -->
<g id="edge36" class="edge">
<title>int0_int_read_pulse&#45;&gt;int0_int_check_range</title>
<path fill="none" stroke="black" d="M1272,-773.03C1272,-764.66 1272,-754.36 1272,-744.84"/>
<polygon fill="black" stroke="black" points="1275.5,-744.9 1272,-734.9 1268.5,-744.9 1275.5,-744.9"/>
</g>
<!-- int0_int_update_rcp -->
<g id="node36" class="node">
<title>int0_int_update_rcp</title>
<polygon fill="lightblue" stroke="black" points="1345,-646 1125,-646 1125,-610 1345,-610 1345,-646"/>
<text xml:space="preserve" text-anchor="middle" x="1235" y="-625.23" font-family="Arial" font-size="12.00">更新New_Rcp和RCP_UPDATED标志</text>
</g>
<!-- int0_int_check_range&#45;&gt;int0_int_update_rcp -->
<g id="edge37" class="edge">
<title>int0_int_check_range&#45;&gt;int0_int_update_rcp</title>
<path fill="none" stroke="black" d="M1264.51,-696.8C1259.53,-685.35 1252.87,-670.06 1247.14,-656.89"/>
<polygon fill="black" stroke="black" points="1250.41,-655.63 1243.21,-647.85 1243.99,-658.42 1250.41,-655.63"/>
<text xml:space="preserve" text-anchor="middle" x="1284.97" y="-669.5" font-family="Arial" font-size="10.00">脉冲在范围内</text>
</g>
<!-- int0_int_exit -->
<g id="node38" class="node">
<title>int0_int_exit</title>
<polygon fill="lightblue" stroke="black" points="1335,-465.5 1271,-465.5 1271,-429.5 1335,-429.5 1335,-465.5"/>
<text xml:space="preserve" text-anchor="middle" x="1303" y="-444.73" font-family="Arial" font-size="12.00">退出中断</text>
</g>
<!-- int0_int_check_range&#45;&gt;int0_int_exit -->
<g id="edge38" class="edge">
<title>int0_int_check_range&#45;&gt;int0_int_exit</title>
<path fill="none" stroke="black" d="M1305.43,-696.52C1323.65,-684.93 1344.39,-667.84 1354,-646 1379.59,-587.83 1344.24,-514.16 1320.81,-475.31"/>
<polygon fill="black" stroke="black" points="1323.93,-473.68 1315.67,-467.04 1317.98,-477.38 1323.93,-473.68"/>
<text xml:space="preserve" text-anchor="middle" x="1391.84" y="-582.5" font-family="Arial" font-size="10.00">脉冲超出范围</text>
</g>
<!-- int0_int_set_pwm -->
<g id="node37" class="node">
<title>int0_int_set_pwm</title>
<polygon fill="lightblue" stroke="black" points="1313.25,-555.75 1124.75,-555.75 1124.75,-519.75 1313.25,-519.75 1313.25,-555.75"/>
<text xml:space="preserve" text-anchor="middle" x="1219" y="-534.98" font-family="Arial" font-size="12.00">根据Pwm_Limit设置PWM寄存器</text>
</g>
<!-- int0_int_update_rcp&#45;&gt;int0_int_set_pwm -->
<g id="edge39" class="edge">
<title>int0_int_update_rcp&#45;&gt;int0_int_set_pwm</title>
<path fill="none" stroke="black" d="M1231.84,-609.56C1229.65,-597.48 1226.68,-581.11 1224.15,-567.16"/>
<polygon fill="black" stroke="black" points="1227.65,-566.85 1222.42,-557.64 1220.76,-568.1 1227.65,-566.85"/>
</g>
<!-- int0_int_set_pwm&#45;&gt;int0_int_exit -->
<g id="edge40" class="edge">
<title>int0_int_set_pwm&#45;&gt;int0_int_exit</title>
<path fill="none" stroke="black" d="M1235.6,-519.31C1247.91,-506.38 1264.88,-488.55 1278.71,-474.01"/>
<polygon fill="black" stroke="black" points="1281.04,-476.65 1285.4,-467 1275.97,-471.83 1281.04,-476.65"/>
</g>
<!-- pca_int_exit -->
<g id="node40" class="node">
<title>pca_int_exit</title>
<polygon fill="lightblue" stroke="black" points="1516,-733 1452,-733 1452,-697 1516,-697 1516,-733"/>
<text xml:space="preserve" text-anchor="middle" x="1484" y="-712.23" font-family="Arial" font-size="12.00">退出中断</text>
</g>
<!-- pca_int_adjust&#45;&gt;pca_int_exit -->
<g id="edge42" class="edge">
<title>pca_int_adjust&#45;&gt;pca_int_exit</title>
<path fill="none" stroke="black" d="M1484,-773.03C1484,-764.66 1484,-754.36 1484,-744.84"/>
<polygon fill="black" stroke="black" points="1487.5,-744.9 1484,-734.9 1480.5,-744.9 1487.5,-744.9"/>
</g>
</g>
</svg>
